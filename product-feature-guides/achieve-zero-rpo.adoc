---
permalink: product-feature-guides/achieve-zero-rpo.html 
sidebar: sidebar 
keywords: rpo, zero, rto, on-premises, storagegrid, object, replication, synchronous 
summary: '이 기술 보고서에서는 사이트 장애 발생 시 RPO(복구 시점 목표)를 0으로 설정하기 위한 StorageGRID 복제 전략의 구현을 간략하게 설명합니다.' 
---
= StorageGRID로 제로 RPO 달성 - 멀티 사이트 복제에 대한 포괄적인 가이드
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
이 기술 보고서는 사이트 장애 발생 시 RPO(복구 시점 목표)를 0으로 설정하기 위한 StorageGRID 복제 전략을 구현하는 포괄적인 가이드를 제공합니다. 이 문서에서는 다중 사이트 동기식 복제 및 다중 그리드 비동기식 복제를 비롯한 StorageGRID의 다양한 구축 옵션에 대해 자세히 설명합니다. 또한 StorageGRID의 ILM(정보 수명 주기 관리) 정책을 구성하여 여러 위치에서 데이터 내구성 및 가용성을 보장하는 방법에 대해 설명합니다. 또한 중단 없는 클라이언트 운영을 유지하기 위한 성능 고려 사항, 장애 시나리오 및 복구 프로세스에 대해서도 설명합니다. 이 문서의 목표는 완전한 사이트 장애 발생 시에도 동기식 및 비동기식 복제 기술을 모두 활용하여 데이터에 액세스하고 일관성을 유지할 수 있도록 하는 정보를 제공하는 것입니다.



== StorageGRID 개요

NetApp StorageGRID는 업계 표준 Amazon S3(Amazon Simple Storage Service) API를 지원하는 오브젝트 기반 스토리지 시스템입니다.

StorageGRID는 정보 라이프사이클 관리 정책(ILM)에 따라 다양한 서비스 수준의 단일 네임스페이스를 여러 위치에서 제공합니다. 이러한 라이프사이클 정책을 사용하면 라이프사이클 전체에서 데이터 위치를 최적화할 수 있습니다.

StorageGRID은 로컬 및 지리적으로 분산된 솔루션에서 구성 가능한 내구성과 데이터 가용성을 지원합니다. 데이터가 온프레미스에 있든 퍼블릭 클라우드에 있든 상관없이 통합 하이브리드 클라우드 워크플로를 통해 Amazon SNS(Simple Notification Service), Google Cloud, Microsoft Azure Blob, Amazon S3 Glacier, Elasticsearch와 같은 클라우드 서비스를 활용할 수 있습니다.



=== StorageGRID 확장

StorageGRID는 단 3개의 스토리지 노드로 구축할 수 있으며 단일 그리드는 최대 200개 노드까지 확장할 수 있습니다. 단일 그리드를 단일 사이트로 구축하거나 16개 사이트로 확장할 수 있습니다. 최소 그리드는 단일 사이트에 있는 관리자 노드와 3개의 스토리지 노드로 구성됩니다. 관리 노드에는 메트릭 및 로깅을 위한 중앙 지점인 관리 인터페이스가 포함되어 있으며 StorageGRID 구성 요소의 구성을 유지 관리합니다. 관리자 노드에는 S3 API 액세스를 위한 통합 로드 밸런서도 포함되어 있습니다. StorageGRID는 소프트웨어 전용, VMware 가상 머신 어플라이언스 또는 특별 제작된 어플라이언스로 구축할 수 있습니다.

StorageGRID 노드는 개체 수를 최대화하는 메타데이터 전용 노드, 개체 공간을 최대화하는 오브젝트 스토리지 전용 노드 또는 개체 수와 개체 공간을 모두 추가하는 결합된 메타데이터와 개체 스토리지 노드로 구축할 수 있습니다. 각 스토리지 노드는 오브젝트 스토리지에 대해 수 페타바이트에 달하는 용량으로 확장할 수 있으며, 수백 페타바이트의 단일 네임 스페이스를 구축할 수 있습니다. StorageGRID는 게이트웨이 노드라는 S3 API 작업을 위한 통합 로드 밸런서도 제공합니다.

image:zero-rpo/delivery-paths.png["StorageGRID 구축 옵션"]

StorageGRID는 사이트 토폴로지에 배치된 노드 모음으로 구성됩니다. StorageGRID의 사이트는 고유한 물리적 위치일 수도 있고 그리드의 다른 사이트와 논리적 구성으로서 공유 물리적 위치에 상주할 수도 있습니다. StorageGRID 사이트는 여러 물리적 위치에 걸쳐 있을 수 없습니다. 사이트는 공유 LAN 인프라를 나타냅니다.



=== StorageGRID 및 장애 도메인

StorageGRID에는 장애 위험을 완화하기 위해 솔루션 설계 방법, 데이터 저장 방법 및 데이터 저장 위치를 결정할 때 고려해야 할 여러 계층의 장애 도메인이 포함되어 있습니다.

* 그리드 수준 - 여러 사이트로 구성된 그리드는 사이트 장애 또는 격리를 가질 수 있으며 액세스 가능한 사이트는 그리드로 계속 작동할 수 있습니다.
* 사이트 수준 - 사이트 내의 장애가 발생하면 해당 사이트의 운영에 영향을 줄 수 있지만 나머지 그리드에는 영향을 주지 않습니다.
* 노드 레벨 - 노드 장애는 사이트 운영에 영향을 미치지 않습니다.
* 디스크 레벨 - 디스크 장애는 노드 작동에 영향을 주지 않습니다.




=== 오브젝트 데이터 및 메타데이터

오브젝트 스토리지의 경우, 스토리지 단위는 파일 또는 블록이 아닌 오브젝트입니다. 파일 시스템 또는 블록 스토리지의 트리와 같은 계층구조와 달리 오브젝트 스토리지는 데이터를 구조화되지 않은 단순 레이아웃으로 구성합니다. 오브젝트 스토리지는 데이터의 물리적 위치를 해당 데이터를 저장하고 검색하는 데 사용되는 메서드에서 분리합니다.

오브젝트 기반 스토리지 시스템의 각 오브젝트에는 오브젝트 데이터와 오브젝트 메타데이터의 두 부분이 있습니다.

* 개체 데이터는 사진, 동영상 또는 의료 기록과 같은 실제 기본 데이터를 나타냅니다.
* 개체 메타데이터는 개체를 설명하는 정보입니다.


StorageGRID는 오브젝트 메타데이터를 사용하여 그리드 전체의 모든 오브젝트의 위치를 추적하고 각 오브젝트의 라이프사이클 관리를 제공합니다.

오브젝트 메타데이터에는 다음과 같은 정보가 포함됩니다.

* 각 오브젝트의 고유 ID(UUID), 오브젝트 이름, S3 버킷의 이름, 테넌트 계정 이름 또는 ID, 오브젝트의 논리적 크기, 오브젝트를 처음 생성한 날짜와 시간, 오브젝트를 마지막으로 수정한 날짜와 시간이 포함된 시스템 메타데이터
* 각 오브젝트 복제본 또는 삭제 코딩 조각의 현재 스토리지 위치입니다.
* 객체와 연결된 모든 사용자 메타데이터 키 값 쌍입니다.
* S3 오브젝트의 경우 오브젝트와 연결된 모든 오브젝트 태그 키-값 쌍입니다
* 분할된 오브젝트 및 다중 파트 오브젝트의 경우 세그먼트 식별자 및 데이터 크기가 사용됩니다.


개체 메타데이터는 사용자 지정이 가능하며 확장이 가능하므로 응용 프로그램에서 유연하게 사용할 수 있습니다. StorageGRID에서 오브젝트 메타데이터를 저장하는 방법과 위치에 대한 자세한 내용은 를 참조하십시오 https://docs.netapp.com/us-en/storagegrid/admin/managing-object-metadata-storage.html["오브젝트 메타데이터 스토리지 관리"].

StorageGRID의 ILM(정보 라이프사이클 관리) 시스템은 StorageGRID 시스템의 모든 오브젝트 데이터에 대한 배치, 기간 및 수집 동작을 조정하는 데 사용됩니다. ILM 규칙은 StorageGRID에서 오브젝트의 복제본을 사용하거나 노드 및 사이트 간에 오브젝트를 삭제 코딩하여 시간에 따라 저장하는 방식을 결정합니다. 이 ILM 시스템은 그리드 내의 객체 데이터 일관성을 담당합니다.



=== 삭제 코딩

StorageGRID는 여러 레벨에서 코드 데이터를 삭제하는 기능을 제공합니다. StorageGRID 어플라이언스를 사용하면 RAID를 통해 모든 드라이브의 각 노드에 저장된 데이터를 삭제하여 여러 디스크 장애로 인한 데이터 손실 또는 중단을 방지할 수 있습니다. 또한 StorageGRID는 삭제 코딩 체계를 사용하여 사이트 내의 노드에 오브젝트 데이터를 저장하거나 StorageGRID의 ILM 규칙을 통해 StorageGRID 시스템의 3개 이상의 사이트에 분산할 수 있습니다.

삭제 코딩은 노드 장애에 대한 복원력을 제공합니다. 스토리지 레이아웃은 오버헤드가 낮은 반면, 복제는 동일한 작업을 수행할 수 있습니다. 데이터 청크를 저장하는 데 필요한 최소 노드 수가 충족될 경우 모든 StorageGRID 삭제 코딩 체계를 단일 사이트에 구축할 수 있습니다. 즉, EC 구성표가 4+2인 경우 데이터를 수신하려면 최소 6개의 노드를 사용할 수 있어야 합니다.

image:zero-rpo/ec-schemes.png["오브젝트에 대해 사용 가능한 StorageGRID 삭제 코딩 체계"]



=== 메타데이터 정합성

StorageGRID에서 메타데이터는 일반적으로 사이트당 3개의 복제본으로 저장되므로 정합성 보장 및 가용성이 보장됩니다. 이러한 중복성은 장애가 발생한 경우에도 데이터 무결성과 접근성을 유지할 수 있도록 도와줍니다.

기본 일관성은 그리드 전체에서 정의됩니다. 사용자는 언제든지 버킷 수준에서 일관성을 변경할 수 있습니다.

StorageGRID에서 사용할 수 있는 버킷 일관성 옵션은 다음과 같습니다.

* * 모두 *: 최고 수준의 일관성을 제공합니다. 그리드의 모든 노드가 즉시 데이터를 수신하면 요청이 실패합니다.
* * 강력한 글로벌 *: 모든 사이트에서 모든 클라이언트 요청에 대해 쓰기 후 읽기 일관성을 보장합니다.
* *Strong-global V2*: 모든 사이트에서 모든 클라이언트 요청에 대해 쓰기 후 읽기 일관성을 보장합니다. 메타데이터 복제 쿼럼을 달성할 수 있는 경우 다중 노드 또는 사이트 장애에 대한 일관성을 제공합니다. 예를 들어 사이트 내에 최대 3개의 복제본이 있는 3개 사이트 그리드에서 최소 5개의 복제본을 만들어야 합니다.
* * 강력한 사이트 *: 사이트 내의 모든 클라이언트 요청에 대해 쓰기 후 읽기 일관성을 보장합니다.
* * Read-after-new-write * (기본값): 새 개체에 대해 읽기-쓰기 후 일관성을 제공하고 개체 업데이트에 대한 최종 일관성을 제공합니다. 고가용성 및 데이터 보호 보장 제공 대부분의 경우에 권장됩니다.
* * 사용 가능 *: 새 객체 및 객체 업데이트 모두에 대한 최종 일관성을 제공합니다. S3 버킷의 경우 필요한 경우에만 사용하십시오(예: 거의 읽지 않는 로그 값이 포함된 버킷의 경우 또는 존재하지 않는 키의 헤드 또는 GET 작업의 경우). S3 FabricPool 버킷은 지원되지 않습니다.




=== 오브젝트 데이터 정합성

사이트 내부 및 사이트 간에 메타데이터가 자동으로 복제되지만, 오브젝트 데이터 스토리지를 배치할 결정은 사용자의 몫입니다. 오브젝트 데이터는 사이트 내부 및 사이트 간 복제본에 저장되거나, 사이트 내부 또는 사이트 간 삭제 코딩되거나, 복제 및 삭제 코딩 스토리지 스키마의 조합에 저장될 수 있습니다. ILM 규칙은 모든 오브젝트에 적용되거나 특정 오브젝트, 버킷 또는 테넌트에만 적용되도록 필터링될 수 있습니다. ILM 규칙은 객체의 저장 방식, 복제본 및/또는 삭제 코딩 방식, 해당 위치에 객체가 저장되는 기간, 복제본 또는 삭제 코딩 체계 수가 변경되거나 위치가 시간에 따라 변경될 경우 정의합니다.

각 ILM 규칙은 오브젝트 보호를 위한 세 가지 수집 동작 중 하나인 이중 커밋, 균등 또는 엄격 으로 구성됩니다.

Dual Commit 옵션은 그리드의 다른 두 스토리지 노드에서 즉시 두 개의 복제본을 만들고 클라이언트에 요청을 반환합니다. 노드 선택은 요청의 사이트 내에서 시도되지만 경우에 따라 다른 사이트의 노드를 사용할 수 있습니다. ILM 규칙에 따라 평가되고 배치될 ILM 대기열에 개체가 추가됩니다.

균형 조정 옵션은 ILM 정책을 기준으로 개체를 즉시 평가하고 클라이언트에 요청이 성공적으로 반환되기 전에 개체를 동기적으로 배치합니다. 운영 중단이나 배치 요구 사항을 충족하기에 부적절한 스토리지로 인해 ILM 규칙을 즉시 충족할 수 없는 경우 이중 커밋이 대신 사용됩니다. 문제가 해결되면 ILM은 정의된 규칙에 따라 개체를 자동으로 배치합니다.

Strict 옵션은 ILM 정책을 기준으로 개체를 즉시 평가하고 클라이언트에 요청이 성공적으로 반환되기 전에 개체를 동기식으로 배치합니다. 운영 중단이나 배치 요구 사항을 충족하기에 스토리지 부족으로 인해 ILM 규칙을 즉시 충족할 수 없는 경우 요청이 실패하고 클라이언트가 다시 시도해야 합니다.



=== 로드 밸런싱

StorageGRID는 통합 게이트웨이 노드, 외부 타사 로드 밸런서, DNS 라운드 로빈 또는 스토리지 노드에 대한 직접 클라이언트 액세스를 통해 배포할 수 있습니다. 한 사이트에 여러 게이트웨이 노드를 구축하고 고가용성 그룹으로 구성하여 게이트웨이 노드가 중단될 경우 자동 페일오버 및 장애 복구를 제공할 수 있습니다. 솔루션에 로드 밸런싱 방법을 결합하여 솔루션의 모든 사이트에 대한 단일 액세스 지점을 제공할 수 있습니다.

게이트웨이 노드는 기본적으로 게이트웨이 노드가 있는 사이트의 스토리지 노드 간 로드 밸런싱을 수행합니다. 게이트웨이 노드가 여러 사이트의 노드를 사용하여 부하를 분산하도록 StorageGRID를 구성할 수 있습니다. 이렇게 구성하면 클라이언트 요청에 대한 응답 지연 시간에 이러한 사이트 간의 지연 시간이 추가됩니다. 이는 클라이언트가 총 지연 시간을 허용할 경우에만 구성해야 합니다.



== StorageGRID로 제로 RPO를 달성하는 방법

오브젝트 스토리지 시스템에서 RPO(복구 시점 목표)를 0으로 달성하려면 장애 발생 시 다음 사항이 중요합니다.

* 메타데이터와 개체 콘텐츠 모두 동기화되며 정합성이 보장되는 것으로 간주됩니다
* 오류가 발생해도 개체 콘텐츠에 액세스할 수 있습니다.


멀티 사이트 구축의 경우 Strong Global V2는 모든 사이트에서 메타데이터를 동기화하기 위한 기본 정합성 보장 모델로서 제로 RPO 요구 사항을 충족하는 데 필수적입니다.

스토리지 시스템의 오브젝트는 라이프사이클 동안 데이터의 저장 방법과 위치를 결정하는 ILM(정보 라이프사이클 관리) 규칙에 따라 저장됩니다. 동기식 복제의 경우 Strict 실행 또는 Balanced 실행 중 하나를 고려할 수 있습니다.

* 이러한 ILM 규칙을 엄격하게 실행해야 제로 RPO에 대해 엄격한 실행이 필요합니다. 왜냐하면 지연 또는 폴백 없이 정의된 위치에 오브젝트를 배치하고 데이터 가용성과 일관성을 유지할 수 있기 때문입니다.
* StorageGRID의 ILM 밸런스 수집 동작은 고가용성과 복구 성능 간의 균형을 유지하여 사이트 장애 시에도 사용자가 데이터를 계속 수집할 수 있도록 합니다.


선택적으로 로컬 및 글로벌 로드 밸런싱의 조합을 통해 RTO를 0으로 설정할 수 있습니다. 중단 없는 클라이언트 액세스를 보장하려면 클라이언트 요청의 로드 밸런싱이 필요합니다. StorageGRID 솔루션은 각 사이트에 다수의 게이트웨이 노드와 고가용성 그룹을 포함할 수 있습니다. 사이트 장애 시에도 모든 사이트에 있는 클라이언트에 무중단 액세스를 제공하려면 StorageGRID 게이트웨이 노드와 함께 외부 로드 밸런싱 솔루션을 구성해야 합니다. 각 사이트 내의 로드를 관리하는 게이트웨이 노드 고가용성 그룹을 구성하고 외부 로드 밸런서를 사용하여 고가용성 그룹 전체의 로드 밸런싱을 수행합니다. 외부 로드 밸런서는 상태 점검을 수행하도록 구성되어야 요청이 운영 사이트에만 전송되도록 할 수 있습니다. StorageGRID를 사용한 로드 밸런싱에 대한 자세한 내용은 을 https://www.netapp.com/media/17068-tr4626.pdf["StorageGRID 로드 밸런서 기술 보고서"]참조하십시오.



== 여러 사이트에 동기 배포

* 다중 사이트 솔루션: * StorageGRID를 사용하면 그리드 내의 여러 사이트에 동기식으로 개체를 복제할 수 있습니다. 밸런스 또는 엄격한 동작을 사용하여 ILM(정보 라이프사이클 관리) 규칙을 설정하면 지정된 위치에 오브젝트를 즉시 배치합니다. 버킷 정합성 수준을 강력한 글로벌 v2로 구성하면 동기 메타데이터 복제도 보장됩니다. StorageGRID는 단일 글로벌 네임스페이스를 사용하여 오브젝트 배치 위치를 메타데이터로 저장하므로 모든 노드가 모든 복사본 또는 삭제 코딩 부분의 위치를 알 수 있습니다. 요청이 만들어진 사이트에서 개체를 검색할 수 없는 경우 페일오버 절차 없이 원격 사이트에서 개체를 자동으로 검색합니다.

장애가 해결되면 수동으로 페일백을 수행할 필요가 없습니다. 복제 성능은 네트워크 처리량이 가장 낮고 지연 시간이 가장 짧으며 성능이 가장 낮은 사이트에 따라 달라집니다. 사이트의 성능은 노드 수, CPU 코어 수 및 속도, 메모리, 드라이브 수 및 드라이브 유형에 따라 달라집니다.

* 다중 그리드 솔루션: * StorageGRID는 교차 그리드 복제(CGR)를 사용하여 여러 StorageGRID 시스템 간에 테넌트, 사용자 및 버킷을 복제할 수 있습니다. CGR은 선택한 데이터를 16개 이상의 사이트로 확장하고, 오브젝트 저장소의 사용 가능 용량을 늘리며, 재해 복구를 제공할 수 있습니다. CGR을 이용한 버킷 복제에는 객체, 객체 버전 및 메타데이터가 포함되며 양방향 또는 단방향 복제일 수 있습니다. RPO(복구 지점 목표)는 각 StorageGRID 시스템의 성능과 이러한 시스템 간의 네트워크 연결에 따라 달라집니다.

* 요약 : *

* 그리드 내 복제에는 동기식 및 비동기식 복제가 포함되며, ILM 수집 동작 및 메타데이터 정합성 제어를 사용하여 구성 가능합니다.
* 그리드 간 복제는 비동기식만 가능합니다.




== 단일 그리드 다중 사이트 배포

다음 시나리오에서는 StorageGRID 솔루션을 통합 로드 밸런서 고가용성 그룹에 대한 요청을 관리하는 외부 로드 밸런서(옵션)로 구성합니다. 따라서 RPO가 0일 뿐 아니라 RTO가 0이 됩니다. ILM은 동기식 배치를 위해 균형 잡힌 수집 보호 기능으로 구성됩니다. 각 버킷은 3개 이상의 사이트로 구성된 그리드에 대해 강력한 글로벌 v2 정합성 보장 모델로 구성되고 3개 미만의 사이트에 대해 강력한 글로벌 일관성을 유지합니다.

2개 사이트 StorageGRID 솔루션에는 모든 객체에 대해 최소 2개의 복제본 또는 3개의 EC 청크와 모든 메타데이터에 대한 복제본 6개가 있습니다. 장애 복구 시 중단 시 업데이트가 복구된 사이트/노드에 자동으로 동기화됩니다. 2개 사이트만 있는 경우 전체 사이트 손실을 넘어서는 장애 시나리오에서 제로 RPO를 달성할 가능성이 없습니다.

image:zero-rpo/2-site.png["2개 사이트 StorageGRID 시스템"]

3개 이상의 사이트로 구성된 StorageGRID 솔루션에는 모든 객체에 대해 3개 이상의 복제본 또는 3개의 EC 청크와 모든 메타데이터에 대한 복제본 9개가 있습니다. 장애 복구 시 중단 시 업데이트가 복구된 사이트/노드에 자동으로 동기화됩니다. 3개 이상의 사이트에서 제로 RPO를 달성할 수 있습니다.

image:zero-rpo/3-site.png["3개 사이트 StorageGRID 시스템"]

다중 사이트 장애 시나리오

[cols="34%,33%,33%"]
|===
| 실패 | 2-사이트 결과 | 3개 이상의 사이트 결과 


| 단일 노드 드라이브에 장애 | 각 어플라이언스는 여러 디스크 그룹을 사용하며 중단이나 데이터 손실 없이 그룹당 최소 1개의 드라이브를 유지할 수 있습니다. | 각 어플라이언스는 여러 디스크 그룹을 사용하며 중단이나 데이터 손실 없이 그룹당 최소 1개의 드라이브를 유지할 수 있습니다. 


| 단일 사이트에 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. | 운영 중단 또는 데이터 손실이 없습니다. 


| 단일 사이트에 다중 노드 장애 발생  a| 
이 사이트로 리디렉션된 클라이언트 작업이 중단되지만 데이터는 손실되지 않습니다.

다른 사이트로 리디렉션된 작업은 중단 없이 지속되며 데이터 손실이 없습니다.
| 작업은 다른 모든 사이트로 전송되며 중단 없이 데이터 손실이 없습니다. 


| 여러 사이트에서 단일 노드 장애 발생  a| 
다음과 같은 경우 중단 또는 데이터 손실 없음:

* 그리드에 하나 이상의 복제본이 있습니다
* 그리드에 충분한 EC 청크가 있습니다


작업이 중단되고 다음과 같은 경우 데이터 손실 위험이 있습니다.

* 복제본이 없습니다
* EC 척이 부족합니다

 a| 
다음과 같은 경우 중단 또는 데이터 손실 없음:

* 그리드에 하나 이상의 복제본이 있습니다
* 그리드에 충분한 EC 청크가 있습니다


작업이 중단되고 다음과 같은 경우 데이터 손실 위험이 있습니다.

* 복제본이 없습니다
* 개체를 검색할 EC 척이 부족합니다




| 단일 사이트 장애 | 클라이언트 작업은 장애가 해결되거나 버킷 정합성이 강력한 사이트 또는 하위 사이트로 내려가 작업이 성공하지만 데이터가 손실되지 않을 때까지 중단됩니다. | 운영 중단 또는 데이터 손실이 없습니다. 


| 단일 사이트 및 단일 노드 장애 | 장애가 해결될 때까지 클라이언트 작업이 중단되거나 버킷 정합성이 새 쓰기 후 읽기 이하로 낮아져 작업이 성공하고 데이터가 손실될 수 있습니다. | 운영 중단 또는 데이터 손실이 없습니다. 


| 단일 사이트 + 나머지 각 사이트의 노드 1개 | 장애가 해결될 때까지 클라이언트 작업이 중단되거나 버킷 정합성이 새 쓰기 후 읽기 이하로 낮아져 작업이 성공하고 데이터가 손실될 수 있습니다. | 메타데이터 복제 쿼럼을 충족할 수 없고 데이터가 손실될 수 있는 경우 작업이 중단됩니다. 


| 다중 사이트 장애 | 하나 이상의 사이트를 완전히 복구할 수 없는 경우 운영 사이트가 손실되지 않습니다. | 메타데이터 복제 쿼럼을 충족할 수 없는 경우 작업이 중단됩니다. 최소 1개 이상의 사이트가 남아 있는 한 데이터 손실이 없습니다. 


| 사이트의 네트워크 격리 | 클라이언트 작업은 장애가 해결되거나 버킷 정합성이 강력한 사이트 또는 하위 사이트로 내려가 작업이 성공할 수 있지만 데이터 손실은 발생하지 않을 때까지 중단됩니다  a| 
격리된 사이트의 작업은 중단되지만 데이터는 손실되지 않습니다

나머지 사이트에서 작업을 중단하거나 데이터가 손실되지 않습니다

|===


== 다중 사이트 다중 그리드 배포

이 시나리오에서는 중복 계층을 추가하기 위해 두 개의 StorageGRID 클러스터를 사용하고 교차 그리드 복제를 사용하여 이러한 클러스터를 동기화된 상태로 유지합니다. 이 솔루션의 경우 각 StorageGRID 클러스터에는 3개의 사이트가 있습니다. 두 사이트는 개체 스토리지 및 메타데이터에 사용되며 세 번째 사이트는 메타데이터에만 사용됩니다. 두 시스템 모두 두 데이터 사이트 각각에서 삭제 코딩을 사용하여 오브젝트를 동기식으로 저장하도록 균형 잡힌 ILM 규칙을 구성합니다. 버킷은 강력한 글로벌 v2 정합성 보장 모델로 구성됩니다. 각 그리드는 모든 버킷에서 양방향 교차 그리드 복제로 구성됩니다. 이렇게 하면 지역 간 비동기식 복제가 가능합니다. 필요에 따라 글로벌 로드 밸런서를 구현하여 두 StorageGRID 시스템의 통합 로드 밸런서 고가용성 그룹에 대한 요청을 관리하여 제로 RPO를 달성할 수 있습니다.

이 솔루션은 두 지역으로 균등하게 분할된 4개의 위치를 사용합니다. 영역 1은 그리드 1의 스토리지 사이트 2개를 영역의 기본 그리드로 포함하고 그리드 2의 메타데이터 사이트를 포함합니다. 영역 2는 그리드 2의 스토리지 사이트 2개를 영역의 기본 그리드로 포함하고 그리드 1의 메타데이터 사이트를 포함합니다. 각 영역에서 동일한 위치에 다른 영역 그리드의 메타데이터 전용 사이트와 해당 영역의 기본 그리드의 스토리지 사이트가 포함될 수 있습니다. 메타데이터만 세 번째 사이트로 사용하면 메타데이터에 필요한 일관성을 제공할 수 있고 해당 위치에 있는 객체의 저장소를 복제할 수 없습니다.

image:zero-rpo/2x-grid-3-site.png["4개 사이트 멀티 그리드 솔루션"]

이 솔루션은 4개의 별도 위치를 통해 RPO를 0으로 유지하는 2개의 개별 StorageGRID 시스템을 완벽하게 이중화하고 멀티 사이트 동기식 복제와 멀티 그리드 비동기식 복제를 모두 활용합니다. 두 StorageGRID 시스템에서 아무런 중단 없는 클라이언트 작업을 유지하면서 단일 사이트에 장애가 발생할 수 있습니다.

이 솔루션에는 모든 오브젝트에 대해 삭제 코딩 4개의 복사본과 모든 메타데이터에 대한 복제본 18개가 있습니다. 따라서 클라이언트 작업에 영향을 주지 않고 여러 가지 장애 시나리오가 발생할 수 있습니다. 장애 발생 시 중단 시 복구 업데이트가 자동으로 장애가 발생한 사이트/노드에 동기화됩니다.

다중 사이트, 다중 그리드 장애 시나리오

[cols="50%,50%"]
|===
| 실패 | 결과 


| 단일 노드 드라이브에 장애 | 각 어플라이언스는 여러 디스크 그룹을 사용하며 중단이나 데이터 손실 없이 그룹당 최소 1개의 드라이브를 유지할 수 있습니다. 


| 그리드에서 한 사이트에 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드에서 한 사이트에 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 그리드에서 한 사이트에 다중 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드에서 한 사이트에 여러 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 그리드의 여러 사이트에서 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드의 여러 사이트에서 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


|  |  


| 그리드에서 단일 사이트 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드에서 단일 사이트 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 그리드에서 단일 사이트와 단일 노드 장애 발생 | 운영 중단 또는 데이터 손실이 없습니다. 


| 단일 사이트 + 나머지 각 사이트의 노드 1개가 단일 그리드에 포함됩니다 | 운영 중단 또는 데이터 손실이 없습니다. 


|  |  


| 단일 위치 장애 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드 DC1 및 DC3의 단일 위치 오류  a| 
장애가 해결되거나 버킷 일관성이 낮아질 때까지 작업이 중단됩니다. 각 그리드에서 2개의 사이트가 손실됩니다

모든 데이터는 여전히 2개 위치에 있습니다



| 각 그리드 DC1 및 DC4 또는 DC2 및 DC3의 단일 위치 오류 | 운영 중단 또는 데이터 손실이 없습니다. 


| 각 그리드 DC2 및 DC4의 단일 위치 오류 | 운영 중단 또는 데이터 손실이 없습니다. 


|  |  


| 사이트의 네트워크 격리  a| 
격리된 사이트의 작업은 중단되지만 데이터는 손실되지 않습니다

나머지 사이트에서 작업을 중단하거나 데이터가 손실되지 않습니다.

|===


== 결론

StorageGRID로 복구 시점 목표(RPO)를 0으로 달성하는 것은 사이트 장애 발생 시 데이터 내구성과 가용성을 보장하는 데 있어 매우 중요한 목표입니다. 다중 사이트 동기식 복제 및 다중 그리드 비동기식 복제를 비롯한 StorageGRID의 강력한 복제 전략을 활용하여 조직은 클라이언트 작업을 중단 없이 유지하고 여러 위치에서 데이터 일관성을 유지할 수 있습니다. ILM(정보 수명 주기 관리) 정책을 구현하고 메타데이터 전용 노드를 사용하면 시스템의 복원력과 성능이 더욱 향상됩니다. StorageGRID을 사용하면 복잡한 장애 시나리오에서도 데이터에 액세스하고 일관되게 유지할 수 있으므로 데이터를 자신 있게 관리할 수 있습니다. 이러한 포괄적인 데이터 관리 및 복제 접근 방식은 제로 RPO를 달성하고 소중한 정보를 보호하는 데 있어 세심한 계획과 실행의 중요성을 강조합니다.
